\newcommand{\@usepackage}[1]
  {\@ifundefined{#1@loaded}
    {\@iffileexists{#1.hva}
       {\input{#1.hva}\def\csname#1@loaded\endcsname{}}
       {}}
    {}}
\newcommand{\usepackage}[2][!*!]
{\ifthenelse{\equal{#1}{!*!}}
{\begin{toimage}\usepackage{#2}
\end{toimage}}
{\begin{toimage}\usepackage[#1]{#2}
\end{toimage}}%
\@stopoutput\@stopimage\@funcall{\@iter}{\@usepackage,{#2,,}}\@restartimage\@restartoutput
}

