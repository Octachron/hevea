\@primitives{amsmath}
\let\text\mbox
%%AMS environments for displayed equations
\newenvironment{equation*}{\[}{\]}%
\newenvironment{align}
  {\[\def\@currentlabel\theequation%
  \begin{array}{@{\numbertrue\stepcounter{equation}}rl@{\ifnumber\eqno{(\theequation)}\else\addtocounter{equation}{-1}\fi}}}
{\end{array}\]}%
\newenvironment{align*}{\[\begin{array}{rl}}{\end{array}\]}%
\newenvironment{gather}
  {\[\let\@currentlabel\theequation\begin{array}{@{\numbertrue\stepcounter{equation}}c@{\ifnumber\eqno{(\theequation)}\else\addtocounter{equation}{-1}\fi}}}
  {\end{array}\]}
\newenvironment{gather*}{\[\begin{array}{c}}{\end{array}\]}%
\newenvironment{alignat*}[1]{\[\begin{array}{*{#1}{rl}}}{\end{array}\]}%
\newenvironment{multline}{\begin{equation}\begin{array}{l}}{\end{array}\end{equation}}%
\newenvironment{multline*}{\begin{equation*}\nonumber\begin{array}{l}}{\end{array}\end{equation*}}%
\newenvironment{split}{\begin{array}{r}}{\end{array}}%
\renewenvironment{cases}{\left\{\begin{array}{ll}}{\end{array}\right.}%
\newcommand{\intertext}[1]{\qquad\mbox{#1}\\}%
%%Matrices
\newcounter{MaxMatrixCols}\setcounter{MaxMatrixCols}{10}%
\newenvironment{matrix}{\begin{array}{*{\value{MaxMatrixCols}}{c}}}{\end{array}}%
\newenvironment{pmatrix}{\left(\begin{array}{*{\value{MaxMatrixCols}}{c}}}{\end{array}\right)}%
\newenvironment{bmatrix}{\left[\begin{array}{*{\value{MaxMatrixCols}}{c}}}{\end{array}\right]}%
\newenvironment{vmatrix}{\left|\begin{array}{*{\value{MaxMatrixCols}}{c}}}{\end{array}\right|}%
\newenvironment{Vmatrix}{\left|\left|\begin{array}{*{\value{MaxMatrixCols}}{c}}}{\end{array}\right|\right|}%
\newcounter{@hdots}%
\newcommand{\hdotsfor}[2][]{%
\setcounter{@hdots}{#2}%
\whiledo{\value{@hdots}>1}{\ldots &\addtocounter{@hdots}{-1}}%
\ldots}%

